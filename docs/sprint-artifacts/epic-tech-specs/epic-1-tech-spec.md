# Epic 1: Foundation - Technical Specification

**Epic ID:** 1
**Epic Title:** Foundation
**Date:** 2025-11-29
**Author:** Generated by Epic Tech Context Specialist

---

## 1. Epic Overview

### 1.1 Description

Epic 1 establishes the foundational infrastructure for the AI Obituaries web application. This epic sets up the development environment, design system, data layer, navigation shell, and content update mechanism that all subsequent epics will build upon.

### 1.2 Business Value and Goals

- **Enable Development Velocity:** Provide a solid, well-configured foundation so developers can immediately start building features
- **Establish Visual Identity:** Implement the Deep Archive theme to create a consistent, polished aesthetic from day one
- **Connect Data Pipeline:** Integrate Sanity CMS to enable content-driven architecture with type-safe data fetching
- **Enable Content Updates:** Implement ISR (Incremental Static Regeneration) so content editors can publish changes without deployments
- **Ensure Crawlability:** Configure Next.js for static generation to meet SEO requirements from the start

### 1.3 Functional Requirements Covered

| FR ID | Requirement | Story |
|-------|-------------|-------|
| FR5 | System loads obituary data from external JSON/API source (not hardcoded) | 1.3 |
| FR6 | System updates displayed data when source data changes (via ISR revalidation) | 1.5 |
| FR24 | Site has clear primary navigation (Home, Timeline, Categories, About) | 1.4 |
| FR25 | Users can navigate to homepage from any page | 1.4 |
| FR31 | All pages are statically generated and crawlable | 1.1 |

### 1.4 Scope

**In-Scope (5 Stories):**
- Story 1.1: Project Initialization (Next.js 16, TypeScript, Tailwind, shadcn/ui, dev dependencies)
- Story 1.2: Design System Setup (Deep Archive theme, CSS variables, fonts)
- Story 1.3: Sanity CMS Integration (client, queries, TypeScript types)
- Story 1.4: Layout Shell & Navigation (Header, Footer, mobile nav)
- Story 1.5: ISR Revalidation Webhook (on-demand revalidation endpoint)

**Out-of-Scope:**
- About page implementation (navigation link only, page deferred to later epic)
- Timeline visualization and timeline page
- Search feature and filtering UI
- Individual obituary detail pages (routing structure only)
- Claims listing page (revalidation path only)
- Category filtering and tag system
- Data visualizations (scatter plot, trends)
- Mobile-first responsive layouts beyond basic navigation

### 1.5 Dependencies and Prerequisites

**External Dependencies:**
- Sanity CMS project must be created (can be done during Story 1.3)
- Vercel account for deployment (not required for development)
- Node.js 20+ LTS installed

**No Epic Dependencies:** This is the first epic; all other epics depend on it.

---

## 2. Technical Context

### 2.1 Relevant Architecture Decisions

| ADR | Decision | Impact on Epic 1 |
|-----|----------|------------------|
| ADR-001 | Sanity CMS over JSON Files | Story 1.3 must set up Sanity client and GROQ queries |
| ADR-004 | URL State with nuqs | nuqs must be installed in Story 1.1, configured in layout |

### 2.2 Technology Stack Details for Epic 1

| Technology | Version | Purpose in Epic 1 |
|------------|---------|-------------------|
| Next.js | 16.0.5 | App Router, SSG, ISR, Cache Components |
| React | 19.x | UI components (comes with Next.js) |
| TypeScript | 5.x | Type safety throughout |
| Tailwind CSS | 4.1.x | Utility-first styling, design system |
| shadcn/ui | 3.5.0 | Component library foundation |
| @sanity/client | 6.29.1 | CMS data fetching |
| Visx | 3.12.0 | (Installed, used in later epics) |
| Motion | 12.9.2 | (Installed, used in later epics) |
| nuqs | 2.x | URL state management |
| date-fns | 4.1.0 | Date formatting utilities |
| Vitest | 3.2.4 | Unit testing framework |
| Playwright | 1.57.0 | E2E testing framework |

### 2.3 Integration Points

```
Epic 1 Integration Architecture:

┌─────────────────┐
│   Sanity CMS    │
│   (External)    │
└────────┬────────┘
         │ GROQ Queries
         ▼
┌─────────────────┐     ┌─────────────────┐
│  src/lib/sanity │────►│  Server         │
│  - client.ts    │     │  Components     │
│  - queries.ts   │     │  (pages)        │
└─────────────────┘     └────────┬────────┘
                                 │
         ┌───────────────────────┼───────────────────────┐
         ▼                       ▼                       ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  Layout Shell   │     │  /api/revalidate │     │  Vercel CDN     │
│  Header/Footer  │     │  (ISR Webhook)   │     │  (Static Pages) │
└─────────────────┘     └─────────────────┘     └─────────────────┘

ISR Cache Invalidation Flow:
1. Editor publishes change in Sanity Studio
2. Sanity fires webhook to /api/revalidate with secret header
3. Endpoint validates secret, calls revalidatePath() for affected routes
4. Next.js marks cached pages as stale
5. Next request triggers regeneration with fresh Sanity data
6. Vercel CDN serves new static page
```

---

## 3. Story Breakdown

### Story 1.1: Project Initialization

**As a** developer,
**I want** a Next.js 16 project initialized with the core stack,
**So that** I can begin building features on a solid foundation.

#### Acceptance Criteria

| AC ID | Criterion | Testable Condition |
|-------|-----------|-------------------|
| AC-1.1.1 | Next.js 16 project created with App Router | `npm run dev` starts without errors; `src/app/` directory exists |
| AC-1.1.2 | TypeScript strict mode enabled | `tsconfig.json` has `"strict": true` |
| AC-1.1.3 | Tailwind CSS v4 configured | Tailwind classes render correctly; color variables (`bg-[--bg-primary]`, `text-[--text-primary]`) applied in globals.css |
| AC-1.1.4 | ESLint configured | `npm run lint` executes without configuration errors |
| AC-1.1.5 | shadcn/ui initialized | `components.json` exists; can add shadcn components |
| AC-1.1.6 | Core dependencies installed | All packages from dependency list present in `package.json` |
| AC-1.1.7 | Dev dependencies installed | Vitest, Testing Library, Playwright in devDependencies |
| AC-1.1.8 | Project builds successfully | `npm run build` completes without errors |

#### Technical Approach

Execute the following initialization sequence:

```bash
# Step 1: Create Next.js 16 project
npx create-next-app@latest aiobituaries --typescript --tailwind --eslint --app --src-dir

# Step 2: Initialize shadcn/ui
cd aiobituaries
npx shadcn@latest init

# Step 3: Install core dependencies
npm install @sanity/client @visx/visx motion nuqs date-fns

# Step 4: Install dev dependencies
npm install -D vitest @testing-library/react @testing-library/jest-dom playwright jsdom
```

#### Files to Create/Modify

| File | Action | Description |
|------|--------|-------------|
| `src/app/layout.tsx` | Create | Root layout with html lang attribute |
| `src/app/page.tsx` | Create | Homepage placeholder |
| `src/app/globals.css` | Create | Tailwind directives |
| `tailwind.config.ts` | Create | Tailwind configuration |
| `tsconfig.json` | Create | TypeScript configuration |
| `next.config.ts` | Create | Next.js configuration |
| `components.json` | Create | shadcn/ui configuration |
| `package.json` | Create | Dependencies manifest |
| `vitest.config.ts` | Create | Vitest test configuration |

#### Dependencies on Other Stories

None - this is the first story.

---

### Story 1.2: Design System Setup

**As a** developer,
**I want** the Deep Archive theme implemented as CSS variables,
**So that** all components use consistent visual styling.

#### Acceptance Criteria

| AC ID | Criterion | Testable Condition |
|-------|-----------|-------------------|
| AC-1.2.1 | Deep Archive color variables defined | CSS variables accessible in any component via `var(--color-name)` |
| AC-1.2.2 | Background colors configured | `--bg-primary: #0C0C0F`, `--bg-secondary: #14141A`, `--bg-card: #18181F`, `--bg-tertiary: #1C1C24` |
| AC-1.2.3 | Text colors configured | `--text-primary: #E8E6E3`, `--text-secondary: #A8A5A0`, `--text-muted: #6B6860` |
| AC-1.2.4 | Accent color configured | `--accent-primary: #C9A962` |
| AC-1.2.5 | Category colors configured | `--category-capability: #C9A962`, `--category-market: #7B9E89`, `--category-agi: #9E7B7B`, `--category-dismissive: #7B7B9E` |
| AC-1.2.6 | Semantic colors configured | `--success: #7B9E89`, `--warning: #C9A962`, `--error: #9E5555`, `--info: #7B8B9E` |
| AC-1.2.7 | Instrument Serif font configured | Headlines render in Instrument Serif |
| AC-1.2.8 | Geist font configured | Body text renders in Geist |
| AC-1.2.9 | Geist Mono font configured | Monospace text renders in Geist Mono |
| AC-1.2.10 | Body has dark background | Document body shows `#0C0C0F` background |
| AC-1.2.11 | shadcn/ui components themed | shadcn components use Deep Archive colors |

#### Technical Approach

1. Define CSS custom properties in `globals.css` under `:root` and `.dark` selectors
2. Configure `next/font` for Geist (built into Next.js)
3. Add Instrument Serif via Google Fonts or self-hosted
4. Extend Tailwind config to reference CSS variables
5. Update shadcn/ui `components.json` for dark theme defaults

#### Files to Create/Modify

| File | Action | Description |
|------|--------|-------------|
| `src/app/globals.css` | Modify | Add CSS custom properties for theme |
| `src/app/layout.tsx` | Modify | Configure font providers |
| `tailwind.config.ts` | Modify | Extend colors to use CSS variables |
| `components.json` | Modify | Set dark mode as default |

#### Dependencies on Other Stories

- Depends on: Story 1.1 (project must exist)

---

### Story 1.3: Sanity CMS Integration

**As a** developer,
**I want** Sanity CMS client configured with TypeScript types,
**So that** I can fetch obituary data with type safety.

#### Acceptance Criteria

| AC ID | Criterion | Testable Condition |
|-------|-----------|-------------------|
| AC-1.3.1 | Sanity client configured | `createClient` call with projectId, dataset, apiVersion |
| AC-1.3.2 | Environment variables documented | `.env.local.example` lists all required vars |
| AC-1.3.3 | `getObituaries()` query exported | Function returns array of Obituary type |
| AC-1.3.4 | `getObituaryBySlug()` query exported | Function accepts slug, returns single Obituary or null |
| AC-1.3.5 | `getObituaryCount()` query exported | Function returns number |
| AC-1.3.6 | Obituary interface defined | TypeScript interface matches Sanity schema |
| AC-1.3.7 | Category type defined | Type literal union of 4 categories |
| AC-1.3.8 | ContextMetadata interface defined | All optional fields typed correctly |
| AC-1.3.9 | Client uses CDN for reads | `useCdn: true` in client config |
| AC-1.3.10 | API version pinned | `apiVersion: '2024-01-01'` or later |

#### Technical Approach

```typescript
// src/lib/sanity/client.ts
import { createClient } from '@sanity/client'

export const client = createClient({
  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!,
  dataset: process.env.NEXT_PUBLIC_SANITY_DATASET || 'production',
  apiVersion: '2024-01-01',
  useCdn: true,
})

// src/types/obituary.ts
export interface Obituary {
  _id: string
  slug: string
  claim: string
  source: string
  sourceUrl: string
  date: string // ISO 8601
  categories: Category[]
  context: ContextMetadata
}

export type Category = 'market' | 'capability' | 'agi' | 'dismissive'

export interface ContextMetadata {
  nvdaPrice?: number
  msftPrice?: number
  googPrice?: number
  benchmarkName?: string
  benchmarkScore?: number
  currentModel?: string
  milestone?: string
  note?: string
}
```

#### Files to Create/Modify

| File | Action | Description |
|------|--------|-------------|
| `src/lib/sanity/client.ts` | Create | Sanity client configuration |
| `src/lib/sanity/queries.ts` | Create | GROQ query functions |
| `src/lib/sanity/types.ts` | Create | Sanity-specific type utilities |
| `src/types/obituary.ts` | Create | Obituary domain types |
| `src/types/context.ts` | Create | Context metadata types |
| `.env.local.example` | Create | Environment variable template |

#### Dependencies on Other Stories

- Depends on: Story 1.1 (dependencies installed)

---

### Story 1.4: Layout Shell & Navigation

**As a** user,
**I want** a consistent navigation header across all pages,
**So that** I can always return home and understand where I am.

#### Acceptance Criteria

| AC ID | Criterion | Testable Condition |
|-------|-----------|-------------------|
| AC-1.4.1 | Header visible on all pages | Header component renders in root layout |
| AC-1.4.2 | Site title links to home | Clicking "AI Obituaries" navigates to `/` |
| AC-1.4.3 | Navigation links present | "Home" and "About" links visible |
| AC-1.4.4 | Active link styled | Current route shows gold underline |
| AC-1.4.5 | Header is sticky | Header stays at top during scroll |
| AC-1.4.6 | Backdrop blur effect | Header has `backdrop-filter: blur()` |
| AC-1.4.7 | Title uses Instrument Serif | Logo/title renders in serif font |
| AC-1.4.8 | Mobile hamburger menu visible | On viewports < 768px (md breakpoint), navigation links hidden and hamburger icon button visible |
| AC-1.4.9 | Mobile menu interaction | Clicking hamburger opens Sheet overlay with nav links; clicking a link or outside closes Sheet |
| AC-1.4.10 | Footer present | Footer renders below main content |
| AC-1.4.11 | Footer has copyright | Copyright text visible in footer |
| AC-1.4.12 | Header height consistent | Header is 64px height |

#### Technical Approach

1. Create `Header` component with `position: sticky`, `backdrop-filter: blur(8px)`
2. Use `next/link` for navigation with `usePathname()` for active state detection
3. Use shadcn/ui `Sheet` component for mobile navigation
4. Create `Footer` component with copyright and optional links
5. Wrap page content in layout with Header and Footer

```tsx
// src/components/layout/header.tsx structure
<header className="sticky top-0 h-16 bg-[--bg-primary]/80 backdrop-blur-md border-b border-[--border] z-50">
  <nav>
    <Link href="/" className="font-serif text-xl">AI Obituaries</Link>
    <div className="hidden md:flex gap-6">
      <NavLink href="/">Home</NavLink>
      <NavLink href="/about">About</NavLink>
    </div>
    <MobileNav /> {/* Sheet component */}
  </nav>
</header>
```

#### Files to Create/Modify

| File | Action | Description |
|------|--------|-------------|
| `src/components/layout/header.tsx` | Create | Main header component |
| `src/components/layout/footer.tsx` | Create | Footer component |
| `src/components/layout/nav.tsx` | Create | Desktop navigation links |
| `src/components/layout/mobile-nav.tsx` | Create | Mobile Sheet navigation |
| `src/app/layout.tsx` | Modify | Add Header and Footer to layout |
| `src/components/ui/sheet.tsx` | Add | shadcn Sheet component (via CLI) |

#### Dependencies on Other Stories

- Depends on: Story 1.2 (design system for styling)

---

### Story 1.5: ISR Revalidation Webhook

**As a** content editor,
**I want** the site to update automatically when I publish changes in Sanity,
**So that** new obituaries appear without manual deployment.

#### Acceptance Criteria

| AC ID | Criterion | Testable Condition |
|-------|-----------|-------------------|
| AC-1.5.1 | Webhook endpoint exists | POST to `/api/revalidate` returns response |
| AC-1.5.2 | Secret validation works | Request without valid secret returns 401 |
| AC-1.5.3 | Invalid secret rejected | Mismatched secret returns `{ error: 'Invalid secret' }` |
| AC-1.5.4 | Homepage revalidated | `revalidatePath('/')` called on valid request |
| AC-1.5.5 | Claims page revalidated | `revalidatePath('/claims')` called |
| AC-1.5.6 | Obituary pages revalidated | `revalidatePath('/obituary/[slug]', 'page')` called |
| AC-1.5.7 | Success response returned | Valid request returns `{ revalidated: true }` |
| AC-1.5.8 | Secret read from env | Uses `SANITY_WEBHOOK_SECRET` environment variable |

#### Technical Approach

```typescript
// src/app/api/revalidate/route.ts
import { revalidatePath } from 'next/cache'
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  const secret = request.headers.get('x-sanity-webhook-secret')

  if (secret !== process.env.SANITY_WEBHOOK_SECRET) {
    return NextResponse.json({ error: 'Invalid secret' }, { status: 401 })
  }

  // Revalidate all pages that display obituaries
  revalidatePath('/')
  revalidatePath('/claims')
  revalidatePath('/obituary/[slug]', 'page')

  return NextResponse.json({ revalidated: true })
}
```

**Sanity Webhook Configuration (Manual Step):**
1. Go to Sanity project dashboard
2. Navigate to API > Webhooks
3. Create webhook pointing to `https://yourdomain.com/api/revalidate`
4. Set HTTP method to POST
5. Add header: `x-sanity-webhook-secret: <your-secret>`
6. Filter: Document type = `obituary`
7. Trigger on: Create, Update, Delete

#### Files to Create/Modify

| File | Action | Description |
|------|--------|-------------|
| `src/app/api/revalidate/route.ts` | Create | ISR webhook endpoint |
| `.env.local.example` | Modify | Add SANITY_WEBHOOK_SECRET |

#### Dependencies on Other Stories

- Depends on: Story 1.3 (Sanity integration for context)

---

## 4. Implementation Guidelines

### 4.1 Coding Standards

| Standard | Requirement |
|----------|-------------|
| **File Naming** | kebab-case for files: `scatter-plot.tsx`, `use-filters.ts` |
| **Component Naming** | PascalCase for components: `ScatterPlot`, `ObituaryCard` |
| **Function Naming** | camelCase for functions: `getObituaries()`, `formatDate()` |
| **Type Naming** | PascalCase for types/interfaces: `Obituary`, `ContextMetadata` |
| **Constants** | SCREAMING_SNAKE_CASE: `CATEGORY_COLORS`, `DEFAULT_ZOOM` |
| **Server Components** | Default; only use `'use client'` when interactivity required |
| **Imports** | Organized: React/Next, Third-party, Internal libs, Components, Types |

### 4.2 Import Order Convention

```typescript
// 1. React/Next.js
import { Suspense } from 'react'
import Link from 'next/link'

// 2. Third-party libraries
import { format } from 'date-fns'

// 3. Internal: lib/utils
import { cn } from '@/lib/utils/cn'
import { getObituaries } from '@/lib/sanity/queries'

// 4. Internal: components
import { Header } from '@/components/layout/header'

// 5. Internal: types
import type { Obituary } from '@/types/obituary'
```

### 4.3 Testing Requirements

| Test Type | Scope for Epic 1 | Tool |
|-----------|------------------|------|
| Unit Tests | Sanity query functions, utility functions | Vitest |
| Component Tests | Header, Footer, Nav components | Vitest + Testing Library |
| E2E Tests | Navigation flow, page loads | Playwright |

**Minimum Test Coverage for Epic 1:**
- `src/lib/sanity/queries.ts`: 80%+ coverage
- `src/components/layout/*`: All components tested for rendering
- E2E: Homepage loads, navigation works

**Story-Level Test Scenarios:**

| Story | Test Type | Specific Scenarios |
|-------|-----------|-------------------|
| 1.1 | Build | `npm run build` succeeds; `npm run dev` starts; `npm run lint` passes |
| 1.2 | Visual | CSS variables resolve correctly; body background is `#0C0C0F`; headline font is Instrument Serif |
| 1.3 | Unit | GROQ query validation (well-formed queries); `getObituaries()` returns typed array; `getObituaryBySlug()` returns null for missing slug; empty results handled gracefully (returns `[]` not error) |
| 1.4 | Component | Header renders with sticky positioning; NavLink shows active state for current path; Mobile hamburger visible at <768px; Sheet opens on hamburger click; Sheet closes on link click or outside click |
| 1.5 | Unit/Integration | POST without secret returns 401; POST with invalid secret returns 401; POST with valid secret returns `{ revalidated: true }`; `revalidatePath` called for `/`, `/claims`, `/obituary/[slug]` |

### 4.4 Performance Considerations

| Consideration | Implementation |
|---------------|----------------|
| **Static Generation** | Ensure all pages use SSG by default |
| **Font Loading** | Use `next/font` for optimal font loading |
| **CSS Loading** | Tailwind CSS purged for production |
| **Image Optimization** | (Not in Epic 1, but configure `next/image` for later) |

---

## 5. Traceability Matrix

### 5.1 FR to Story Mapping

| FR ID | Requirement Description | Story ID | Acceptance Criteria |
|-------|-------------------------|----------|---------------------|
| FR5 | System loads obituary data from external JSON/API source | 1.3 | AC-1.3.1 through AC-1.3.10 |
| FR6 | System updates displayed data when source data changes | 1.5 | AC-1.5.1 through AC-1.5.8 |
| FR24 | Site has clear primary navigation | 1.4 | AC-1.4.1 through AC-1.4.4 |
| FR25 | Users can navigate to homepage from any page | 1.4 | AC-1.4.2 |
| FR31 | All pages are statically generated and crawlable | 1.1 | AC-1.1.8 |

### 5.2 Story to Component Mapping

| Story | Components Created | Location |
|-------|-------------------|----------|
| 1.1 | (Project structure only) | — |
| 1.2 | (CSS configuration only) | `src/app/globals.css` |
| 1.3 | Sanity Client, Queries, Types | `src/lib/sanity/`, `src/types/` |
| 1.4 | Header, Footer, Nav, MobileNav | `src/components/layout/` |
| 1.5 | Revalidate API Route | `src/app/api/revalidate/` |

### 5.3 Test Coverage Mapping

| Component/Module | Test File | Coverage Target |
|------------------|-----------|-----------------|
| `src/lib/sanity/queries.ts` | `tests/unit/lib/sanity/queries.test.ts` | 80% |
| `src/lib/sanity/client.ts` | `tests/unit/lib/sanity/client.test.ts` | 100% |
| `src/components/layout/header.tsx` | `tests/components/layout/header.test.tsx` | Renders correctly |
| `src/components/layout/nav.tsx` | `tests/components/layout/nav.test.tsx` | Active state |
| `/api/revalidate` | `tests/unit/api/revalidate.test.ts` | 100% |

---

## 6. Non-Functional Requirements

### 6.1 Performance Targets for Epic 1

| Metric | Target | Rationale |
|--------|--------|-----------|
| Build Time | < 30s | Fast iteration during development |
| Dev Server Start | < 5s | Quick feedback loop |
| Homepage TTFB | < 200ms (dev) | Responsive development |
| Bundle Size (initial) | < 100KB gzip | Foundation should be lean |

### 6.2 Security Requirements

| Requirement | Implementation |
|-------------|----------------|
| Webhook Secret | Store in environment variable, validate on every request |
| External Links | (Not in Epic 1, but establish pattern) `rel="noopener noreferrer"` |
| Environment Variables | Never commit `.env.local`; use `.env.local.example` for docs |

### 6.3 Reliability Requirements

| Requirement | Implementation |
|-------------|----------------|
| Sanity Fallback | Graceful error handling if Sanity is unavailable |
| Build Resilience | Pages should build even if Sanity has no data |

---

## 7. Risks, Assumptions, and Questions

### 7.1 Risks

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Next.js 16 breaking changes | Low | Medium | Pin exact version in package.json |
| Sanity API changes | Low | Medium | Pin apiVersion in client config |
| shadcn/ui compatibility | Low | Low | Test component additions early |
| Font loading issues | Medium | Low | Use `next/font` with fallbacks |

### 7.2 Assumptions

| Assumption | Impact if Invalid |
|------------|-------------------|
| Sanity project will be created separately | Story 1.3 cannot test actual data fetching |
| Vercel deployment not required for Epic 1 | ISR webhook cannot be fully tested locally |
| Node.js 20+ available on dev machines | May need to update setup instructions |

### 7.3 Open Questions

| Question | Status | Owner |
|----------|--------|-------|
| Should we self-host Instrument Serif or use Google Fonts? | Open | Developer |
| Do we need a placeholder/mock for Sanity during development? | Open | Developer |
| Should About page be created in Epic 1 or deferred? | Assumed: Deferred | PM |

---

## 8. Epic Completion Criteria

- [ ] Project runs locally with `npm run dev`
- [ ] Deep Archive theme visible (dark background, gold accent)
- [ ] Navigation header renders on all pages
- [ ] Header is sticky with backdrop blur
- [ ] Mobile navigation hamburger works
- [ ] Footer renders with copyright
- [ ] Sanity client configured (with or without live project)
- [ ] TypeScript types for Obituary, Category, ContextMetadata defined
- [ ] GROQ query functions exported and typed
- [ ] ISR webhook responds to POST requests
- [ ] Webhook returns 401 for invalid secret
- [ ] `npm run build` succeeds
- [ ] `npm run lint` passes

---

## Summary Statistics

| Metric | Count |
|--------|-------|
| Stories in Epic | 5 |
| Total Acceptance Criteria | 49 |
| Functional Requirements Covered | 5 |
| Components to Create | 4 |
| API Routes to Create | 1 |
| Type Definitions to Create | 4 |

---

_Generated by Epic Tech Context Specialist_
_Date: 2025-11-29_
_For: AI Obituaries Project_
